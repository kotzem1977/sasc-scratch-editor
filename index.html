<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="google" value="notranslate" />
    <link rel="shortcut icon" href="static/favicon.ico" />
    <title>Scratch 3.0 GUI â€” SA SchoolCoding</title>

    <!-- Fix for GitHub Pages subpath -->
    <script>
    (function(){
      const origFetch = window.fetch;
      if (!origFetch) return;

      // e.g. /sasc-scratch-editor/index.html -> /sasc-scratch-editor/
      const basePath = (location.pathname.replace(/\/[^/]*$/, '/')); 

      // Only rewrite these root-relative prefixes
      const PREFIXES = ['/libraries/', '/static/', '/chunks/'];

      function needsRewrite(u) {
        return typeof u === 'string' && PREFIXES.some(p => u.startsWith(p));
      }

      function toProjectURL(u) {
        const rel = u.replace(/^\//, '');
        return new URL(rel, location.origin + basePath).toString();
      }

      window.fetch = function(u, opts){
        const fixed = needsRewrite(u) ? toProjectURL(u) : u;
        return origFetch.call(this, fixed, opts);
      };
    })();
    </script>

    <!-- Main editor bundle -->
    <script defer src="gui.js"></script>

    <style>
      html, body { height: 100%; margin: 0; }
      body { overflow: hidden; background: #0f0f0f; }
    </style>
  </head>
  <body></body>
</html>
