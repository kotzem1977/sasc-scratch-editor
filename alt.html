<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="google" value="notranslate" />
    <link rel="shortcut icon" href="static/favicon.ico" />
    <title>Scratch 3.0 GUI (alt) â€” SA SchoolCoding</title>

    <!-- Self-host asset rewriter: routes internalapi assets to /cdn-assets/<md5ext> -->
    <script>
    (function(){
      const origFetch = window.fetch && window.fetch.bind(window);
      if (!origFetch) return;

      function toLocalAssetURL(u) {
        const url = typeof u === 'string' ? u : u.url;
        try {
          const parsed = new URL(url, location.href);
          const p = parsed.pathname.replace(/^\//, '');
          if (p.startsWith('internalapi/asset/')) {
            const parts = p.split('/');
            const md5ext = parts[2];
            if (md5ext && md5ext.includes('.')) {
              const base = location.origin + location.pathname.replace(/\/[^/]*$/, '/');
              return base + 'cdn-assets/' + md5ext;
            }
          }
        } catch (_) {}
        return null;
      }

      window.fetch = function(input, init){
        const candidate = toLocalAssetURL(input);
        if (candidate) {
          if (typeof input === 'string') return origFetch(candidate, init);
          return origFetch(new Request(candidate, input), init);
        }
        return origFetch(input, init);
      };
    })();
    </script>

    <!-- Use the alternate bundle if you prefer -->
    <script defer src="gui.js"></script>

    <style>
      html, body { height: 100%; margin: 0; }
      body { overflow: hidden; background: #0f0f0f; }
    </style>
  </head>
  <body></body>
</html>
